<div class="component-container-col">
  <div>
    Welcome to Scribe Data View Tool: An application to organize and view the
    <a
      href="https://response.epa.gov/site/site_profile.aspx?site_id=ScribeGIS"
      target="_blank"
    > USEPA's Environmental Response Team's Scribe database
    </a>.
    <div *ngIf="projectsLoaded" style="margin-top: 10px;">
      <mat-label>Select Project: </mat-label>
      <select matNativeControl name="selectProject"
              [(ngModel)]="selectedProject" (ngModelChange)="getProjectData($event)">
        <option value="" selected></option>
        <option *ngFor="let project of userProjects" [value]="project.projectid">
          {{project.project_name}}
        </option>
      </select>
    </div>
  </div>
  <mat-tab-group (selectedIndexChange)="onTabChange($event)" animationDuration="10ms">
    <mat-tab label="{{tabs[0]}}">
      <div>
        <span [hidden]="(numOfGeoSamplePoints <= 1)"
              class="mat-warn">
          &nbsp;&emsp; {{'Number of records without geospatial points:' + (projectSamplesRowData.length - numOfGeoSamplePoints)}}
        </span>
        <div class="component-container-flex">
          <app-ag-grid
            [hidden]="!selectedProject"
            [isLoading]="isLoadingData"
            [columnDefs]="projectSamplesColDefs"
            [rowData]="projectSamplesRowData"
            [style.width]="(numOfGeoSamplePoints >= 1) ? '900px' : '100%'"
          ></app-ag-grid>
          <app-map-view
            [hidden]="!selectedProject"
            [pointData]="projectSamplesRowData"
            (mapFeaturesLoadedEvent)="setNumOfGeoFeatures($event)"
            [style.display]="(numOfGeoSamplePoints >= 1) ? 'block' : 'none'"
          ></app-map-view>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="{{tabs[1]}}">
      <app-ag-grid
        [hidden]="!selectedProject"
        [isLoading]="isLoadingData"
        [columnDefs]="projectLabResultsColDefs"
        [rowData]="projectLabResultsRowData"
        [ngStyle]="{'width': '100%'}"
      ></app-ag-grid>
    </mat-tab>
  </mat-tab-group>
</div>

